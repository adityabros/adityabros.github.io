document.getElementById("mic_image").addEventListener("click",function(){if(-1!=(curr_src=document.getElementById("mic_image").src).indexOf("static_mic.gif")){if("webkitSpeechRecognition"in window)document.getElementById("mic_image").src="mic.gif",recognition.start(),recognition.onstart=function(){console.log("I started")},recognition.onerror=function(n){},recognition.onend=function(){!1==manual_stop?recognition.start():manual_stop=!1},recognition.onresult=function(n){for(var e="",a=n.resultIndex;a<n.results.length;++a)if(n.results[a].isFinal){final_transcript+=n.results[a][0].transcript;for(var s=0,t=0,i=0,o=0;o<hare_synonyms_regex.length;o++)s+=(final_transcript.toLowerCase().match(hare_synonyms_regex[o])||[]).length;for(var m=0;m<krishna_synonyms_regex.length;m++)t+=(final_transcript.toLowerCase().match(krishna_synonyms_regex[m])||[]).length;for(var g=0;g<rama_synonyms_regex.length;g++)i+=(final_transcript.toLowerCase().match(rama_synonyms_regex[g])||[]).length;document.getElementById("counters").innerHTML=String(s)+","+String(t)+","+String(i),s>=6&&t>=3&&i>=3&&(ct+=1,document.getElementById("counts").innerHTML="Counts : "+String(ct),document.getElementById("rounds").innerHTML="Rounds : "+String(parseInt(ct/108)),final_transcript="",s=0,t=0,i=0)}else e+=n.results[a][0].transcript};else{upgrade();return}}else document.getElementById("mic_image").src="static_mic.gif",manual_stop=!0,recognition.stop()});for(var ignore_onend,start_timestamp,create_email=!1,final_transcript="",recognizing=!1,ct=0,hare_synonyms=["hare","hurray","haray","hray","hrray","hara","har"],krishna_synonyms=["krishna","krishn","krsna","klisna","krishnaa"],rama_synonyms=["rama","raam","ram","ramaa","raamaa","rom","rome","lama","laam","lam","lamaa","laamaa"],hare_synonyms_regex=[],krishna_synonyms_regex=[],rama_synonyms_regex=[],manual_stop=!1,h=0;h<hare_synonyms.length;h++){var n=RegExp(hare_synonyms[h],"g");hare_synonyms_regex.push(n)}for(var k=0;k<krishna_synonyms.length;k++){var e=RegExp(krishna_synonyms[k],"g");krishna_synonyms_regex.push(e)}for(var r=0;r<rama_synonyms.length;r++){var a=RegExp(rama_synonyms[r],"g");rama_synonyms_regex.push(a)}var recognition=new webkitSpeechRecognition;recognition.continuous=!0,recognition.interimResults=!0;var grammar="#JSGF V1.0; grammar colors; public <color> = hare | krishna | rama ;",speechRecognitionList=new webkitSpeechGrammarList;function upgrade(){alert("You need to update your browser ! . Sorry :(")}speechRecognitionList.addFromString(grammar,1),recognition.grammars=speechRecognitionList;
