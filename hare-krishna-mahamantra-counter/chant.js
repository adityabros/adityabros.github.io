document.getElementById("mic_image").addEventListener("click",function(){if(curr_src=document.getElementById("mic_image").src,-1!=curr_src.indexOf("static_mic.gif")){if(!("webkitSpeechRecognition"in window))return void upgrade();document.getElementById("mic_image").src="mic.gif",recognition.start(),recognition.onstart=function(){console.log("I started")},recognition.onerror=function(n){},recognition.onend=function(){0==manual_stop?recognition.start():manual_stop=!1},recognition.onresult=function(n){for(var r=n.resultIndex;r<n.results.length;++r)if(n.results[r].isFinal){final_transcript+=n.results[r][0].transcript;for(var e=0,a=0,t=0,s=0;s<hare_synonyms_regex.length;s++)e+=(final_transcript.toLowerCase().match(hare_synonyms_regex[s])||[]).length;for(var i=0;i<krishna_synonyms_regex.length;i++)a+=(final_transcript.toLowerCase().match(krishna_synonyms_regex[i])||[]).length;for(var o=0;o<rama_synonyms_regex.length;o++)t+=(final_transcript.toLowerCase().match(rama_synonyms_regex[o])||[]).length;e>=8&&a>=4&&t>=4&&(ct+=1,document.getElementById("counts").innerHTML="Counts : "+String(ct),document.getElementById("rounds").innerHTML="Rounds : "+String(parseInt(ct/108)),final_transcript="",e=0,a=0,t=0)}else n.results[r][0].transcript}}else document.getElementById("mic_image").src="static_mic.gif",manual_stop=!0,recognition.stop()});for(var ignore_onend,start_timestamp,create_email=!1,final_transcript="",recognizing=!1,ct=0,hare_synonyms=["hare","hurray","haray","hray","hrray","hara","har"],krishna_synonyms=["krishna","krishn","krsna","klisna","krishnaa"],rama_synonyms=["rama","raam","ram","ramaa","raamaa","rom","rome","lama","laam","lam","lamaa","laamaa"],hare_synonyms_regex=[],krishna_synonyms_regex=[],rama_synonyms_regex=[],manual_stop=!1,h=0;h<hare_synonyms.length;h++){var hare_regex=new RegExp(hare_synonyms[h],"g");hare_synonyms_regex.push(hare_regex)}for(var k=0;k<krishna_synonyms.length;k++){var krishna_regex=new RegExp(krishna_synonyms[k],"g");krishna_synonyms_regex.push(krishna_regex)}for(var r=0;r<rama_synonyms.length;r++){var rama_regex=new RegExp(rama_synonyms[r],"g");rama_synonyms_regex.push(rama_regex)}var recognition=new webkitSpeechRecognition;recognition.continuous=!0,recognition.interimResults=!0;var grammar="#JSGF V1.0; grammar colors; public <color> = hare | krishna | rama ;",speechRecognitionList=new webkitSpeechGrammarList;function upgrade(){alert("You need to update your browser ! . Sorry :(")}speechRecognitionList.addFromString(grammar,1),recognition.grammars=speechRecognitionList;